import {
  init_esm_shims
} from "./chunk-WWCIODDN.js";

// Buttons/General/giveaway_entry.ts
init_esm_shims();
import { EmbedBuilder } from "discord.js";
import { readFileSync, writeFileSync } from "fs";
var button = {
  id: "giveaway_entry",
  async execute(interaction, client) {
    let giveaways = JSON.parse(readFileSync("./JSON/giveaways.json", "utf8"));
    const giveaway = giveaways.find((g) => g.messageId == interaction.message.id);
    if (!giveaway) return interaction.reply({ content: "Dieses Giveaway konnte nicht gefunden werden!", ephemeral: true });
    const embed = EmbedBuilder.from(interaction.message.embeds[0]);
    if (giveaway.participants.find((p) => p == interaction.user.id)) return interaction.reply({ content: "Du nimmst bereits an diesem Gewinnspiel Teil", ephemeral: true });
    giveaway.participants.push(interaction.user.id);
    giveaways = giveaways.filter((g) => g.messageId != giveaway.messageId);
    giveaways.push(giveaway);
    embed.data.fields[0].value = giveaway.participants.length.toString();
    await interaction.message.edit({ embeds: [embed] });
    interaction.reply({ content: "Deine Teilnahme an dem Gewinnspiel war erfolgreich!", ephemeral: true });
    writeFileSync("./JSON/giveaways.json", JSON.stringify(giveaways, null, 2));
  }
};
var giveaway_entry_default = button;
export {
  giveaway_entry_default as default
};
