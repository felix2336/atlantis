import {
  MessageUser
} from "./chunk-P5JGOPVX.js";
import {
  init_esm_shims
} from "./chunk-WWCIODDN.js";

// Events/messageCounter/addUser.ts
init_esm_shims();
import { Events } from "discord.js";
import { readFileSync, writeFileSync } from "fs";
var addUser_default = {
  name: Events.GuildMemberUpdate,
  async execute(oldMember, newMember) {
    if (oldMember.user.bot) return;
    let DB = JSON.parse(readFileSync("./JSON/messages.json", "utf8"));
    if (!oldMember.roles.cache.has("1156298949301379212" /* staff */) && newMember.roles.cache.has("1156298949301379212" /* staff */)) {
      const user = new MessageUser({ userid: newMember.user.id, username: newMember.user.username });
      DB.push(user);
      writeFileSync("./JSON/messages.json", JSON.stringify(DB, null, 2), "utf8");
    }
    if (oldMember.roles.cache.has("1156298949301379212" /* staff */) && !newMember.roles.cache.has("1156298949301379212" /* staff */)) {
      DB = DB.filter((user) => user.userid != newMember.user.id);
      writeFileSync("./JSON/messages.json", JSON.stringify(DB, null, 2), "utf8");
    }
  }
};
export {
  addUser_default as default
};
