import {
  MessageUser
} from "./chunk-P5JGOPVX.js";
import {
  init_esm_shims
} from "./chunk-WWCIODDN.js";

// Events/messageCounter/countMessages.ts
init_esm_shims();
import { Events, ChannelType } from "discord.js";
import { readFileSync, writeFileSync } from "fs";
var countMessages_default = {
  name: Events.MessageCreate,
  async execute(message, client) {
    if (message.author.bot) return;
    if (message.channel.type == ChannelType.DM) return;
    if (!message.member.roles.cache.has("1156298949301379212" /* staff */)) return;
    if (message.channel.parentId == "1156996872657977394") return;
    if (message.channel.parentId == "1180678820085370940") return;
    let DB = JSON.parse(readFileSync("./JSON/messages.json", "utf8"));
    const UserData = DB.find((u) => u.userid == message.author.id);
    let User;
    if (!UserData) {
      User = new MessageUser({ userid: message.author.id, username: message.author.username });
    } else {
      User = new MessageUser().assignData(UserData);
    }
    const day = (/* @__PURE__ */ new Date()).getDay();
    User.addMessage(day);
    DB = DB.filter((u) => u.userid != message.author.id);
    DB.push(User);
    writeFileSync("./JSON/messages.json", JSON.stringify(DB, null, 2));
  }
};
export {
  countMessages_default as default
};
